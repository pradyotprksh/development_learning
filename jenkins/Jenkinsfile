pipeline {
    agent any

    stages {
        stage('Projects Checkup') {
            parallel {
                // Android
                def android_script = '../../scripts/android_script.py'
                stage('JenkinsLearning project') {
                    steps {
                        dir('./android/JenkinsLearning') {
                            script {
                                sh 'python3 ${android_script}'
                            }
                        }
                    }
                }

                // Python
                stage('pokedex project') {
                    steps {
                        // when { changeset './kotlin/ktor/pokedex' }
                        dir('./kotlin/ktor/pokedex') {
                            script {
                                sh 'python3 ../../../scripts/kotlin_script.py'
                            }
                        }
                    }
                }

                // Rust
                stage('common_programming_concepts project') {
                    steps {
                        dir('./rust/common_programming_concepts') {
                            script {
                                sh 'python3 ../../scripts/rust_script.py'
                            }
                        }
                    }
                }
                stage('guessing_number project') {
                    steps {
                        dir('./rust/guessing_number') {
                            script {
                                sh 'python3 ../../scripts/rust_script.py'
                            }
                        }
                    }
                }
                stage('hello-rust project') {
                    steps {
                        dir('./rust/hello-rust') {
                            script {
                                sh 'python3 ../../scripts/rust_script.py'
                            }
                        }
                    }
                }
                stage('struct_example project') {
                    steps {
                        dir('./rust/struct_example') {
                            script {
                                sh 'python3 ../../scripts/rust_script.py'
                            }
                        }
                    }
                }
            }
        }
    }
}