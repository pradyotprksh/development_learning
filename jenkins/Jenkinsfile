pipeline {
    agent any

    environment {
        ANDROID_SCRIPT = '../../scripts/android_script.py'
        KOTLIN_SCRIPT = '../../../scripts/kotlin_script.py'
        RUST_SCRIPT = '../../scripts/rust_script.py'
    }

    stages {
        stage('Projects Checkup') {
            parallel {
                // Android
                stage('JenkinsLearning project') {
                    steps {
                        dir('./android/JenkinsLearning') {
                            script {
                                sh "python3 ${env.ANDROID_SCRIPT}"
                            }
                        }
                    }
                }

                // Python
                stage('pokedex project') {
                    steps {
                        // when { changeset './kotlin/ktor/pokedex' }
                        dir('./kotlin/ktor/pokedex') {
                            script {
                                sh "python3 ${env.KOTLIN_SCRIPT}"
                            }
                        }
                    }
                }

                // Rust
                dir('./rust') {
                    stage('common_programming_concepts project') {
                        steps {
                            dir('./rust/common_programming_concepts') {
                                script {
                                    sh "python3 ${env.RUST_SCRIPT}"
                                }
                            }
                        }
                    }
                    stage('guessing_number project') {
                        steps {
                            dir('./rust/guessing_number') {
                                script {
                                    sh "python3 ${env.RUST_SCRIPT}"
                                }
                            }
                        }
                    }
                    stage('hello-rust project') {
                        steps {
                            dir('./rust/hello-rust') {
                                script {
                                    sh "python3 ${env.RUST_SCRIPT}"
                                }
                            }
                        }
                    }
                    stage('struct_example project') {
                        steps {
                            dir('./rust/struct_example') {
                                script {
                                    sh "python3 ${env.RUST_SCRIPT}"
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}