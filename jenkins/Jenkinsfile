pipeline {
    agent any

    stages {
        stage('Build Android Project') {
            echo 'Checking out android projects'
        }

        parallel {
            dir('./android') {
                stage('JenkinsLearning project') {
                    dir('./JenkinsLearning') {
                        script {
                            writeFile file: 'local.properties', text: 'sdk.dir=/Users/pradyotprakash/Library/Android/sdk'
                            sh './gradlew build'
                        }
                    }
                }
                stage('Demo project') {
                    dir('./Demo') {
                        script {
                            writeFile file: 'local.properties', text: 'sdk.dir=/Users/pradyotprakash/Library/Android/sdk'
                            sh './gradlew build'
                        }
                    }
                }
            }
        }
    }
}
